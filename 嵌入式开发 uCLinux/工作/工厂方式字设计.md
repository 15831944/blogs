# 互感器

电流互感器（TAs）、电压互感器（VTs）或线路传感器（LPSs）

1. 互感器绕组极性接反会导致模拟量校正时相位增益出现18000或-18000及与其相近的数值

# 模拟量满量程

经过16位AD转换后的采样值, 例如32767, 此时程序无法知道它代表的是100A还是40A, 因此需要指定满量程

DSP值和RMS值间相互转换

1. 工厂方式字中的满量程是有效值, 换算时, RMS值最大量程应乘以根号2后的暂态最大值
2. DSP值由于是short类型整数, 最大值为32767

# 模拟量校正

1. 输入配置: 将所有参与校正(通道有效, 额定值不为0)的电流, 电压信号接入额定值(例如额定值为5A, 100V), 即所有电流串接, 所有电压并接, 并且电流电压相位均为零度
2. 计算原理: 将计算出的RMS结果值与施加量的值进行比较, 得到幅值增益(扩大10000倍, 包括两段校正)与相位增益(扩大100倍, 取值范围-180~180)
3. 二段校正: 由于互感器的非线性, 除了一点校正外, 施加电路大于30A时, 进行大电流二段校正

# 模拟量人工置数

1. 人工置数的值覆盖原始的采样值, 不支持小数, 显示在工具上的值时乘以scale系数后的值, 实际值应再除以scale系数
2. 人工置数只支持电压, 电流等基本量, 不支持功率等计算量

# 模拟量计算

1. 电压: 星形接法时, 测量出三相对地电压, 并计算出3个线电压; 角形接法时, 测量出Uab和Ucb这2个线电压, 并计算出Uca线电压和三相电压
2. 频率: 采用第一路A相电压的频率
3. 零序电路: 星形接法且没有实际零序通道时由软件合成零序电流值

# 功率计算

依据一条电压线路通道数计算, 若接入3个通道则采用三表法计算; 若接入2个通道则采用两表法计算

# Scale 系数的计算

1. 采样数据是2字节的short型, 计算出的模拟量数据是4字节的long型, 值扩大了1000倍, 相当于精确到3位小数
2. 在保存到进程数据表中时缩小1000倍并乘以scale系数, 结果值取值范围是-32768~32767, 用于规约进行数据传输, 若scale系数小于1000, 将损失精度
1. 用户最大值: 在保证不溢出的情况下取适当值, 对于电流电压等无符号数, 用户最小值为0, 对于功率等有符号数, 用户最小值一般为对称设置
2. 工程最大值: 取比实际量程稍大的值, 例如相电压满量程是220, 则工程最大值取320

104规约

传二次值用2字节的短整型，数据范围是0~65535，为了防止溢出需要进行Scale。
传一次值用4字节的短浮点型

CAN

只能传2字节的短整型
因为API定义一条报文8个字节，前2个字节用于头信息，后6个自己传3个数据
