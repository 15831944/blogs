# Processor Expert

1. PE 作为一个插件集成在 Eclipse IDE 中, 用于从 embedded components 生成代码
2. PE 具有内建的关于所有微控制器单元和集成外设的内部定义, embedded components 提供属性, 方法, 事件, 用于配置这些微控制器单元和外设
3. PE 创建 HAL, HAL 提供统一的 API, 使在 Freescale 设备间移植很简单
4. PE 中创建的应用从构建块(building blocks)中构建, 构建块叫做 Embedded Components 和 CPU components, CPU 组件是特殊的嵌入式组件

# Embedded Components

1. Components: 组件是基本的功能的封装, 使用 UUID(universally unique identifier) 标识, 一个组件对应一个外设?
2. Embedded Components: 涵盖最常用的功能, 例如, 端口位操作, 外部中断, 定时器模式, 串行异步/同步通信, AD转换, I2C, CAN
3. Processor Components: 封装了一种处理器类型
4. Component Template:
5. Components Library:

设备

1. MCG, Multipurpose Clock Generator Lite
2. Serial Communications Interface Module LPUART1

# Project 项目文件组织

文件夹

1. Generated_Code — the directory containing all generated source code modules for components.
2. Documentation — the directory with the project documentation files generated by Processor Expert.
3. Sources – the directory for main module, event module and other user modules.

1. \.settings:
2. Documentation:
3. Generated_Code: 其中的源文件和头文件均由 Processor Expert 生成, 不应手动修改
4. Project_Settings
5. SDK:
6. Sources
7. Static_Code

XML 文件

1. .project
2. .cproject
3. .cwGeneratedFileSetLog
4. ProcessorExpert.pe
5. ProjectInfo.xml
6. g_c
7. g_x

```
.\Generated_Code\PE_low_level_init.h
.\Static_Code\System\PE_low_level_init.c
.\SDK\platform\osa\src\fsl_os_abstraction_free_rtos.c
```

# Kinetis SDK

1. KSDK 包含了外设的 HAL, 和建立在 HAL 之上的外设驱动程序
2. KSDK 还包含了最新的 RTOS 内核, USB stack, 其他中间件, 来支持 Kinetis 设备的快速开发

# Component Categories

1. Processor External Devices, 外设: 传感器, 内存, 显示器, EVM 设备
2. Processor Internal Devices, 片上: 转换器, 定时器, PortIO
3. Logical Device Drivers, LDD
4. Operating Systems
5. SW, 纯软件算法

Level of Abstraction

1. LDD Components, 支持 RTOS 驱动程序的创建, 部分可移植, 提供 HAL, 提供 Init 和 Deinit 方法, 不会自动初始化, 由用户在运行时调用, 多用于中断模式
2. High Level Components, 移植性最好, I/O操作, 定时器, 通信, ADC, 内部内存, 提供硬件事件或软件事件(缓存区溢出, 方法的参数不合适等)
3. Low Level Components, 部分可移植
4. Peripheral Initialization Components, 最低层, 基于设备的控制寄存器, 用于初始化这些外围设备, 通常只包含初始化方法, 名称使用 Init_ 前缀, 移植性最差, 生成中断向量表, 有些支持 ISR 的初始化, 但不提供处理中断的方法
1. PEx SDK components: (fsl_gpio, fls_uart) 橘黄色, 表示高层组件, 封装设备功能, 外围设备驱动程序, 提供运行时方法和中断服务例程
2. Init Components: (Init_GPIO, Init_UART) 浅蓝色, 表示低层组件, 配置设备寄存器, 编译时的初始化配置, 仅提供初始化代码(没有运行时方法)
3. PEx SDK HAL components: (fsl_gpio_hal, fsl_uart_hal) 深蓝色, 实现低层抽象功能, 设备的运行时配置和控制, HAL 低层驱动程序

1. 能用 SDK HAL components 解决的就不用 SDK components 了, 减少生成的代码量
2. 用了 SDK components, 其中自然就会包含 SDK HAL components

组件的接口

1. 属性: 在设计阶段定义组件在运行时的行为
2. 方法: 组件功能的运行时的控制, 可以禁用不需要的方法以减小生成的代码, 可以直接拖到编辑器中用, 蓝色M字母图标
3. 事件: 将组件产生的软硬件事件对接到用户代码, 从中断服务例程中请求, 会自动插入空的函数由用户实现, 绿色闪电图标

1. Component Inspector 具有 Basic 和 Advanced 两种视图

1. Static Code, 库文件的副本(standalone 模式)和 PE 生成的配置文件
2. Generated Code, 组件的驱动程序和配置

1. 组件可以指定自动初始化(上电启动时)或手动初始化(调用初始化方法)

# Configuring Components

1. 中断的意思是中断了 CPU 使其挂起正常执行流, 转而执行匹配的 ISR, 完成后在继续 CPU 之前的执行流
2. 硬件事件或软件命令可以产生中断
3. 中断向量表 Interrupt Vector Processor, 完全由 PE 生成, 指定一个中断该执行哪个 ISR

1. 中断优先级: mininum, low, medium, high, maximum, 高优先级可以中断第优先级
2. 事件代码优先级: 不支持

1. PE 的配置显示在 Generator_Configurations 文件夹中, 每个配置存有所有组件使能状态, 但不保存组件设置

运行时检查

1. 片上外设: 一个外设不能同时分配给多个组件
2. 中断优先级:
3. 存储空间: 组件可以申请特定类型的存储空间, PE 可以检查该存储空间的地址是否正确
4. 定时: 用内部定时模块检查

1. Init Method
2. Deinit Method: 禁用外设, 释放其内存

# Debugger

1. OpenOCD
2. PE Micro
3. Segger J-link

# Components User Guide

KSDK 1.3.0 repository - installed components

1. fsl_tpm
