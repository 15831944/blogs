# 1 面向对象编程

面向对象的思想主要包括以下3种应用，我们常接触的是面向对象编程。

1. 面向对象编程 (OOP, Object Oriented Programming)
2. 面向对象分析 (OOA)
3. 面向对象设计 (OOD)

## 1.1 对象（实例）和抽象（类）

1. 对象到类为抽象化
2. 类到对象为实例化

## 1.2 风格对比

1. Simula 67 学派 (如 C++)，编译时就可检查出各种错误，较为严谨，学习门槛高
2. Smalltalk 学派 (如 Objective-C)，允许运行时错误，较为自由，学习门槛低

# 2 类和对象

## 2.1 实例化对象

使用 alloc, init 方法 (不推荐 new 方法)实例化对象（Foundation 框架，NSObject 基类）

## 2.2 成员变量和属性

### 1 成员变量

写在 @interface 下

类内使用成员变量(虽然声明为 @public 并使用 -> 运算符调用)

如果没有属性，则需要使用 set 和 get 方法在类外调用以访问成员变量

### 2 属性

写在 @property 行

类外使用属性（使用 . 运算符调用）

属性的作用为了在类外能够访问成员变量

属性是成员变量的外部接口

### 3 成员变量和属性对比

使用 @synthesize 将属性名和成员变量名进行对接

成员变量名一般是属性名加下划线前缀（C++ 中习惯用 m，代表 mine）以区分，这样访问属性时，就能够访问到成员变量

如果不声明成员变量，只声明属性，则会自动生成以下划线开头的同名的成员变量, 属性要在 h 文件中声明，

成员变量则可以在 m 文件中声明

属性的本质是调用 set 和 get 方法访问成员变量

# 3 方法

使用中括号[]调用方法

在 Xcode 中使用 command-click 查看指定方法的声明

## 1. 方法的类型

### 1. 类方法

也叫静态方法，用“+”号打头

使用类名进行调用

### 2. 对象方法

也骄傲非静态方法，用“-”号打头

使用对象名进行调用

### 3. 类方法和对象方法辨析

若要在对象方法中调用类方法，直接在对象方法中使用类名进行调用即可

若要在类方法中调用对象方法，需要在类方法中使用 alloc 方法实例化对象后再进行调用

在对象方法中可以访问该类的成员变量

在类方法中可以只能访问 static 静态变量

## 2. 方法的声明

`- (int) showWithA:(int)a andB:(int)b;`

使用红色字体标注

| 项目 | 内容 |
| - | - |
| 方法类型 | <font color=red>-</font> (int) showWithA:(int)a andB:(int)b; |
|返回值类型 | - (<font color=red>int</font>) showWithA:(int)a andB:(int)b; |
|冒号表示含有参数| - (int) showWithA<font color=red>:</font>(int)a andB<font color=red>:</font>(int)b; |
| 参数类型 | - (int) showWithA:(<font color=red>int</font>)a andB:(<font color=red>int</font>)b; |
| 参数名 | - (int) showWithA:(int)<font color=red>a</font> andB:(int)<font color=red>b</font>; |
| 函数名 | - (int) <font color=red>showWithA:</font>(int)a<font color=red> andB:</font>(int)b;(注意包括空格和冒号) |

## 3. 方法的初始化

| 返回值类型 | 含义 |
| - | - |
| id | 任意对象类型 |
| instancetype | 当前类的类型 |

### 1. 重写初始化方法

```
- (instancetype) init
{
	self = [super init];
	if (self){
		// 对成员变量赋值
	}
	return self;
}
```

使用重写的初始化方法，这样，实例化后的对象会具有初始的成员变量的初始值，但由于 init 方法没有参数，所以不够好用

### 2. 自定义初始化方法

```
- (instancetype) initWithA:(NSString *)str andB:(int)i;
{
	self = [super init];
	if (self){
		成员变量1 = str;
		成员变量2 = i;
	}
	return self;
}
```
自定义初始化方法，可以添加方法参数，指定自定义的初始值

# 4. 封装

封装的作用是使具体实现不可见，只向用户提供方法调用的接口

有利于更好的对事物进行抽象

## 1. 成员变量访问修饰符

注意：方法没有访问修饰符，方法的属性类似于 C 语言，在头文件中声明该方法则相当于具有外部属性，即公有，可以在类外调用；不在头文件中声明则相当于私有，不能在类外调用

### 1. @public

在类内类外都可以使用，并且可以被继承

在类外需要使用 -> 运算符访问类中的共有成员变量

### 2. @private

在类内可以访问，在类外不可以调用，并且不可以被继承

### 3. @protected (default)

成员变量的默认类型

在类内可以访问，在类外不可以调用，并且可以被继承

### 4. @package

在框架相当于受保护

在框架外相当于私有

写第三方库时常用

# 5. 继承

子类引用父类头文件

@interface 中用冒号表示继承

默认情况下，子类可以直接使用父类的成员变量，属性和方法

私有变量不可以被继承，即子类不能直接访问父类的私有变量，但是如果父类方法中，使用了该父类的私有变量，子类继承了这个方法，则子类就可以通过调用该父类方法使用父类的私有变量。

如果父类的方法是私有的，即没有在头文件中声明，则子类不可以继承或使用该父类方法。

## 1. 基类

苹果的开发环境提供的类

## 2. 父类和子类

基于已有的类创建新的类

## 3. 多继承

从多个父类继承，Objective-c 不支持，用协议实现类似功能

# 6. 多态

一个父类可以有多个子类，每个子类在继承了父类的方法后，对该父类方法分别进行重写，那么每个子类的方法是不一样的，一个父类方法被改写成多种形态，叫做多态。

如果一种语言不支持多态，那么它只能称为基于对象，而不能称为面向对象

## 1. 方法重写

返回值类型，参数类型，个数，方法名需相同

用 super 调用父类方法

用 self 调用当前类方法，相当于递归调用

注意

1. 引用了子类的头文件就相当于自动包含了父类的头文件

2. 初始化子类赋值给父类对象，父类兼容子类，用父类对象接收子类

## 2. 方法重载

只需要函数名相同，返回值类型，参数类型等不需要相同

Objective-C 不支持方法重载（Java 中支持方法重载）

# 7. 参考

[Objective-C 面向对象初体验](http://www.imooc.com/learn/373)
