# 故障检测

1. 故障持续时间: 故障开始时间是检测到故障的时间, 结束时间是切除后若干周波确认前的时间, 注意需补偿突变量时间
2. 故障报文: 由于故障报文包含开始前，开始后，结束前，结束后，所以故障报文是缓存8周波数据
3. 故障开始前一周波数据可能含有故障点(但不足以引发保护)，因此再往前数一周波，采用不带任何故障点的基波值
4. 数据可能从越限启动的点往前数，也可能从突变量启动的点往前数，因此突变量启动后，必需计算一周波的基波值，然后正常的基波计算从哪个位置开始？？？
5. 分相上报: 分相上报的问题是虚遥信置位的时刻不同，即总故障发生时刻和分相故障发生时刻需要分别缓存，故障消失时则是取当时的时刻，所以不需要额外用一个缓存的结构体。
6. 故障指示: DO没有配的话则不应发DO命令；否则会浪费进程时间。
7. 线路事故总虚遥信: 相间I段故障，相间II段故障，单相接地故障，三者的故障总虚遥信
8. 故障发生标志清除，分相故障发生标志也一定要跟着清除，否则，本次A相故障，下次依然A相故障，则分相就检测不到了。虽然故障期间，B相发生故障时可以检测到的。

# 越限告警

1. 启动条件：三相中，最大值大于定值（至少有一相大于定值）
2. 结束条件：三相中，最大值小于定值（三相值全都小于定值）
3. 越限发生过程中，发生抖动，会认为是持续越限。
4. 如果上次越限没返回，即虚遥信合后没有分，则再次越限会再合，例如重启设备时，越限持续，则会发生这种情况。

# 故障点灯及复归

1. 自动复归：时是从发生故障算起，还是从故障切除算起?
2. 手动复归：添加虚遥信，读到这个虚遥信合位就复归故障虚遥信, 人工操作灭灯，如果此时本次故障持续存在，则不应该灭灯之后又被点亮
3. 主站复归：通过通讯工具发DO合闸命令, 复归命令是脉冲，灭灯是发合闸而不是分闸

1. 永久性故障：永久性故障需要自动复归，因为故障不会消失, 永久性故障复归后，本次不应再点灯，下次故障时才重新点灯
2. 瞬时性故障：瞬时性故障可以故障切除时复归，也可以延时后自动复归，后者可以消除一定的抖动。

# 永久故障和瞬时故障判断

重合闸投入情况

1. 重合成功则为瞬时性故障，置瞬时故障虚遥信（在一定时间内检测到不过流）；
2. 重合失败则为永久性故障，置永久故障虚遥信（即重合到故障，重合后、加速跳前检测到过流）；

重合闸退出情况

1. 过流告警后有压则为永久性故障，置永久故障虚遥信；
2. 过流告警后，延时后检测到无压（说明上游开关跳闸了）则为瞬时性故障，置瞬时故障虚遥信；

# 经验

1. Mac 地址相同时, 会导致通信中断

# 测试技巧

1. 正向，反向功率两种过流保护，定值分别设置为一个大值，一个小值，测试源加一个中间值，例如定值设为3A和5A，测试源加4A，则5A的跳闸，3A的不应该跳闸；
2. 多路同时跳闸，把SBO脉冲接到遥信上，遥信SOE变位即脉冲保持时间，可查看是否会出现100ms的脉冲是否会影响500ms的脉冲；
