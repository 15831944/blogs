# 寻址方式

1. 操作数或指令读写方式: 在存储器中，操作数或指令字写入或读出的方式，有地址指定方式、相联存储方式和堆栈存取方式。几乎所有的计算机，在内存中都采用地址指定方式。
2. 当采用地址指定方式时，形成操作数或指令地址的方式称为寻址方式。处理器根据指令中给出的地址信息来寻找物理地址，确定本条指令的数据地址以及下一条要执行的指令地址。
3. 在传统方式设计的计算机中，内存中指令的寻址与数据的寻址是交替进行的

## 指令寻址方式

顺序寻址方式

由于指令地址在内存中按顺序安排，当执行一段程序时，通常是一条指令接一条指令地顺序进行。也就是说，从存储器取出第1条指令，然后执行这条指令；接着从存储器取出第2条指令，再执行第二条指令；接着再取出第3条指令。这种程序顺序执行的过程，称为指令的顺序寻址方式。为此，必须使用程序计数器（又称指令计数器）PC来计数指令的顺序号，该顺序号就是指令在内存中的地址。

跳跃寻址方式

当程序转移执行的顺序时，指令的寻址就采取跳跃寻址方式。所谓跳跃，是指下条指令的地址码不是由程序计数器给出，而是由本条指令给出。注意，程序跳跃后，按新的指令地址开始顺序执行。因此，程序计数器的内容也必须相应改变，以便及时跟踪新的指令地址。采用指令跳跃寻址方式，可以实现程序转移或构成循环程序，从而能缩短程序长度，或将某些程序作为公共程序引用。指令系统中的各种条件转移或无条件转移指令，就是为了实现指令的跳跃寻址而设置的。

## 数据寻址方式

形成操作数的有效地址的方法称为操作数的寻址方式。由于大型机、小型机、微型机和单片机结构不同，从而形成了各种不同的操作数寻址方式。

隐含寻址

这种类型的指令，不是明显地给出操作数的地址。而是在指令中隐含着操作数的地址。例如，单地址的指令格式，就不明显地在地址字段中指出第2操作数的地址，而是规定累加寄存器AC作为第2操作数地址。指令格式明显指出的仅是第1操作数的地址D。因此，累加寄存器AC对单地址指令格式来说是隐含地址。如：DAA ；

立即寻址

指令的地址字段指出的不是操作数的地址，而是操作数本身，这种寻址方式称为立即寻址。立即寻址方式的特点是指令执行时间很短，因为它不需要访问内存取数，从而节省了访问内存的时间。[如：MOV AX,5678H 注意：立即数只能作为源操作数，不能作为目的操作数。

直接寻址

直接寻址是一种基本的寻址方法，其特点是：在指令格式的地址的字段中直接指出操作数在内存的地址。由于操作数的地址直接给出而不需要经过某种变换，所以称这种寻址方式为直接寻址方式。在指令中直接给出参与运算的操作数及运算结果所存放的主存地址，即在指令中直接给出有效地址

间接寻址

间接寻址是相对直接寻址而言的，在间接寻址的情况下，指令地址字段中的形式地址不是操作数的真正地址，而是操作数地址的指示器，或者说此形式地址单元的内容才是操作数的有效地址。

寄存器寻址方式

当操作数不放在内存中，而是放在CPU的通用寄存器中时，可采用寄存器寻址方式。显然，此时指令中给出的操作数地址不是内存的地址单元号，而是通用寄存器的编号（可以是8位也可以是16位（AX，BX，CX，DX））。指令结构中的RR型指令，就是采用寄存器寻址方式的例子。如：MOV DS，AX

寄存器间接寻址方式

寄存器间接寻址方式与寄存器寻址方式的区别在于：指令格式中的寄存器内容不是操作数，而是操作数的地址，该地址指明的操作数在内存中。[2]

相对寻址方式

相对寻址是把程序计数器PC的内容加上指令格式中的形式地址D而形成操作数的有效地址。程序计数器的内容就是当前指令的地址。“相对”寻址，就是相对于当前的指令地址而言。采用相对寻址方式的好处是程序员无须用指令的绝对地址编程，因而所编程序可以放在内存的任何地方。

```
指令格式：MOV　AX，[BX+1200H]　
操作数物理地址PA=(DS/SS)*10H+EA EA=(BX/BP/SI/DI)+(6/8)
位偏移量Disp 对于BX，SI，DI寄存器来说段寄存器默认为DS，对于SP来说，段寄存器默认为SS
```

基址寻址方式

在基址寻址方式中将CPU中的基址寄存器的内容，加上变址寄存器的内容而形成操作数的有效地址。基址寻址的优点是可以扩大寻址能力，因为与形式地址相比，基址寄存器的位数可以设置得很长，从而可以在较大的存储空间中寻址。

变址寻址方式

变址寻址方式与基址寻址方式计算有效地址的方法很相似，它把CPU中某个变址寄存器的内容与偏移量D相加来形成操作数有效地址。
但使用变址寻址方式的目的不在于扩大寻址空间，而在于实现程序块的规律变化。为此，必须使变址寄存器的内容实现有规律的变化（如自增1、自减1、乘比例系数）而不改变指令本身，从而使有效地址按变址寄存器的内容实现有规律的变化。

块寻址方式

块寻址方式经常用在输入输出指令中，以实现外存储器或外围设备同内存之间的数据块传送。块寻址方式在内存中还可用于数据块移动。

# 虚拟地址, 段地址, 偏移地址, 物理地址

intel 8088时代，计算机的地址总线是20位的,即可以寻址能力可以达到1M字节,但是它的ALU和寄存器都只有16位,也就是表示数的能力只能达64k，再大就逾锅了。那怎么办呢？

INTEL想了一个办法，让两个寄存器对来表示一个物理地址，比如说DS：BX，前者叫段寄存器，后者叫偏址寄存器。由于这两个寄存器都是16位，直接相加还是不能匹配20位的地址线的访问能力，因此，INTEL公司变通了一下，人为地将这个组合寻址设计成：在它们组合时，让段寄存器左移四位（假设DS是1234H，左移4位就变成了12340H，至于它内部怎么实现我们不用管它。注意，对于16进制的数来说，乘以16就相当于在原数后面补个0，因为它是逢16进1啊；与10进制数乘10就是后面补0同样道理。）然后与偏址寄存器相加，这样得到的地址最大可以到0FFFFFH。这样行了。现在都32位机了，甚至64位了，所以上面的寻址方法在保护模式下不再用了。

在8086中，逻辑地址、偏移地址、物理地址分别指的是什么？

逻辑地址是在程序中对存储器地址的一种表示方法，由段基址和段内偏移地址两部分组成，都是16位的二进制代码，如1234H：0088H。偏移地址是指段内某个存储单元相对该段首地址的差值。物理地址是8086芯片引线送出的20位地址码，物理地址=段基址*16+偏移地址，用来指出一个特定的存储单元。

# 参考

1. [汇编语言学习之“段地址*16+偏移地址=物理地址”的本质](http://www.cnblogs.com/jiqing9006/archive/2013/03/25/2980950.html)
2. [谁能帮我讲解下段地址，偏移地址，物理地址](http://bbs.vc52.cn/forum.php?mod=viewthread&tid=157754)
3. [为什么汇编8086CPU段地址*16+偏移＝物理地址 他为什么要乘16呢？](http://bbs.csdn.net/topics/380202112)
