# DC 和 GDI 对象

1. 设备描述表或设备上下文(Device context), 相当于画布, 绘图环境, 要在哪里绘图, 包括: 显示器, 打印机, 存储器, 数据的索引等

1. GDI 是图形设备接口(Graphics Device Interface), 它的主要任务是负责系统与绘图程序之间的信息交换, 处理所有 Windows 程序的图形输出
2. 不允许程序直接访问物理显示硬件(显示器, 打印机等), 通过获得与特定窗口相关联设备环境的抽象接口间接访问显示硬件, 用户无需关心具体的物理设备类型, Windows 参考设备环境的数据结构完成数据的输出

有6种 GDI 对象可以用于 DC:

1. Region  区域(画布)
2. Pen     画笔
3. Palette 调色板(颜料盒)
4. Font    字体
5. Brush   刷子(用来刷大面积背景色的粗画笔)
6. Bitmap  位图

接口

1. SelectOBject 函数, 选择或更换画笔对象
2. GetStockObject 函数, 获取系统提供的缺省画笔
3. DeleteObject 函数, 清理画笔

# 绘图 Draw

1. 画线: 捕获鼠标左键按下消息和弹起消息, 得到两个原点, 画出线
2. 使用属性窗口或类向导为指定类添加消息响应函数(Windows Message Handler), 会生成: 函数声明, 定义, 加入消息映射

1. HDC 句柄
2. CDC, CClientDC, CWindowDC 类: 做图相关
3. CPen, CBrush 类:
4. 设备描述表: 将画笔添加到其中
5. 鼠标按下, 弹起, 移动消息处理

消息映射 Msssage Map

1. 多态: 如果将基类的所有成员函数都声明为虚函数, 利用多态型原理, 在子类中重写函数就可以对相同的消息进行不同的相应, 但是类派生层次很多, 每个派生类要都维护一个虚函数表, 内存资源消耗太太, 因此MFC不采用这种方式, 而是采用消息映射

1. 消息循环:
2. 消息映射: 只需要编写消息响应函数, 系统维护一个对照表(映射), 通过窗口句柄找到对应的窗口类, 收到的消息都是发给具体窗口的, 通过句柄找到该对象, 将该对象指针传递给基类, CWnd 基类调用 WindowProc 窗口过程虚成员函数, 在 OnWndMsg 函数中进行消息循环, 判断派生类有没有消息响应函数的声明, 找到就进行调用来处理消息, 子类没有响应则会交由基类进行处理


# 文本 Text
