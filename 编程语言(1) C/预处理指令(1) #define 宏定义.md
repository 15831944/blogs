# 1. 宏定义的作用

`#define` 指令定义了一个标识符及一个字符串

在源程序中每次遇到该标识符时, 均以定义的字符串替换它，如果有参数，还要做参数代换

ANSI 标准将标识符定义为宏名, 将替换过程称为宏替换

命令的一般形式为：

`#define identifier(parameter) string`

例如：

`#define MULTIPLE(a, b) (a) * (b)`

`int area = MULTIPLE(3, 2);`

第一步被换为 `area = a * b;`, 第二步被换为 `area = 3 * 2`;

# 2. 注意

1. 语句末尾没有分号

2. 宏替换只作替换，不做计算，不做表达式求解

3. 函数调用在编译后程序运行时进行，并分配内存; 宏替换在编译前进行，不分配内存

4. 宏的哑实结合不存在类型，也没有类型转换

5. 函数只有一个返回值，利用宏则可以设法得到多个值

6. 宏展开使源程序变长，函数调用则不会

7. 宏展开不占运行时间，只占编译时间，相比函数调用，提高了代码执行速度，但增加了代码长度，函数调用占运行时间，并且具有调用时的开销（分配内存、保留现场、值传递、返回值）

8. 实参如果是表达式，则最好加上括号防止出错

9. 宏名和参数的括号间不能有空格

10. 在标识符和字符串之间可以有任意个空格或制表符

11. 宏名定义后, 即可成为其它宏名定义中的一部分

12. 宏替换仅仅是以字符串的文本代替宏标识符, 前提是宏标识符必须能够独立的识别出来，否则不进行替换

	例如：
	
	`#define XYZ "this is a test"`. 
	
	使用宏 `printf("XYZ");`
	
	该段不打印 `"this is a test"` 而打印 `"XYZ"`
	
	应使用 `printf("%s\n", XYZ);`

13. 如果宏定义长于一行，可以在该行末尾用续行符(反斜杠)续行

	`#defineLONG_STRING "this is a very long\
	
	string that is used as an example"`

14. C语言程序普遍使用大写字母定义标识符

# 3. 宏定义的参数

操作符和宏参数之间可以有任意数量的空格，而不会被当作字符串的一部分

| 操作符 | 含义 |
| - | - |
| # | stringizing 字符串化操作符 |
| ## | token-pasting 符号连接操作符 |
| @# | charizing 字符化操作符 |
