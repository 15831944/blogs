# 函数


1. 函数: 函数包括全局函数和嵌套函数, 是一类(first-class)数据类型, 函数返回值可以是元组类型及其可选型, 用于返回多个值
2. 函数返回值: void 类型返回值为空元组"()", 函数返回值可以使用下划线忽略
3. 函数参数(parameter): 函数参数同时具有参数标签和参数名, 参数标签用于函数调用, 写在参数值(arguments)前面, 参数名用于函数实现, 默认情况下, 参数使用参数名作为参数标签, 即参数名既用于函数调用, 又用于函数实现, 参数名必须唯一, 但多个参数可以有相同的参数标签, 函数调用时传入参数(arguments)的类型和顺序应与函数参数(parameter)一致
4. 参数标签(argument label): 使用 "\_" 忽略参数标签, 则可向 C 语言一样直接传入参数值
5. 参数名(parameter name): 没有参数标签的函数在调用时使用参数名作为参数标签 `parameter name: argument value`, 可以直接写值吗? C 函数的参数只有参数名, 没有参数标签, 在调用时直接传入参数值(argument)
6. 参数默认值(Default Parameter Values): 函数调用时可忽略带默认值的参数, 带默认值的参数一般写在后面
7. 可变参数(Variadic Parameters): 可变参数接受0个或多个指定类型的值, 作为数组被传入, 使用 "..." 声明可变参数, 一个函数最多有一个可变参数
8. 传址调用的参数(In-Out Parameters): 对于传值调用, 参数是输入, 返回值是输出, 而 inout 参数既是输入, 又是输出, 函数参数默认是常量, 尝试改变其值会导致编译错误, in-out 参数会被函数修改并返回替换原始值, 必须传入变量, 前面加 "&" 符号, in-out 参数不能有默认值, 可变参数不能是 inout, In-Out 参数可以认为是影响函数体外作用域的一个可选方式
9. 函数类型: 参数类型和返回类型组成函数类型, 可以向基本类型一样相互赋值, 一个函数的返回值可以是另一个函数(函数类型作为返回类型), 一个函数的参数也可以是另一个函数(函数类型作为参数类型)
1. 嵌套函数: 函数可以定义在另一个函数内, 在被嵌套的函数中可以直接访问在外层函数中声明的变量(不需要用参数传入), 嵌套的函数对外不可见, 但可以被封闭函数(enclosing function)调用

# 闭包 closure

1. 闭包是词法闭包(Lexical Closure)的简称, 是自包含的块(elf-contained blocks), 是引用类型, 没有名称
2. 闭包类似于 OC 中的块(blocks)和其他语言中的匿名函数(lambdas), 函数是可以稍后再调用的闭包
3. 遮盖(closing over): 闭包可以从它们定义的上下文中捕获(capture)和存储任何常量或变量的引用, 称为遮盖这些常量和变量, 无须关心捕获时的内存管理
4. 闭包表达式(Closure Expressions): 闭包表达式用于作为以函数作为参数的函数或方法, 更加简短
5. 捕获值(Capturing Values): 闭包可以在其定义的上下文中捕获常量或变量, 即使定义这些常量和变量的原域已经不存在, 闭包仍然可以在闭包函数体内引用和修改这些值, Swift 自动决定捕获引用还是拷贝
6. 逃离闭包(Escaping Closures): 闭包作为参数传递给函数, 但在函数返回后才被调用, 称为这个闭包逃离了(escape)函数, 使用 @escaping 声明可逃离的闭包类型的参数
7. 自动闭包(Autoclosures): 自动闭包被自动创建, 用于解包作为参数传递给函数的表达式, 即把一句表达式自动地封装成一个闭包

闭包的形式

1. 全局函数是具有名称的闭包, 不捕获任何值
2. 嵌套函数是具有名称的闭包, 从其封闭(enclosing)函数捕获值
3. 闭包表达式是以轻量级语法书写的没有名称的闭包, 从其包围的上下文中捕获值

闭包的语法优化

1. 从上下文中推断参数类型和返回值类型, 通过内联闭包表达式构造的闭包作为参数传递给函数时, 由于该函数指定了可以传入的闭包的类型, 闭包表达式总是可以省略类型声明
2. 隐式返回单表达式闭包, 闭包函数体只有一个表达式时, 由于返回值只能是该表达式, 可省略 return 关键字
3. 简写(Shorthand)参数(argument)名, 通过 $0 , $1 , $2 来顺序调用闭包的参数, 省略闭包参数列表中对参数的定义
4. 尾随(Trailing)闭包语法, 闭包表达式作为函数的最后一个参数, 调用该函数是可以把闭包表达式写在函数括号之后而不是括号内, 若函数只有一个闭包参数, 括号也可省略

# 参考

1. [什么是闭包，我的理解](http://www.cnblogs.com/xiaotie/archive/2011/08/03/2126145.html)
2. [闭包，懂不懂由你，反正我是懂了](http://www.cnblogs.com/frankfang/archive/2011/08/03/2125663.html)
3. [How do JavaScript closures work?](http://stackoverflow.com/questions/111102/how-do-javascript-closures-work)
